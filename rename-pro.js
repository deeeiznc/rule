const provider = $arguments.provider ?? "Provider",
  out = $arguments.out ?? "abbr",
  geoData = {
    "ğŸ‡­ğŸ‡°": { full: "Hong Kong", abbr: "HK" },
    "ğŸ‡¯ğŸ‡µ": { full: "Japan", abbr: "JP" },
    "ğŸ‡¸ğŸ‡¬": { full: "Singapore", abbr: "SG" },
    "ğŸ‡ºğŸ‡¸": { full: "United States", abbr: "US" },
    "ğŸ‡¹ğŸ‡¼": { full: "Taiwan", abbr: "TW" },
    "ğŸ‡¨ğŸ‡³": { full: "Taiwan", abbr: "TW" },
    "ğŸ‡°ğŸ‡·": { full: "South Korea", abbr: "KR" },
    "ğŸ‡³ğŸ‡±": { full: "Netherlands", abbr: "NL" },
    "ğŸ‡©ğŸ‡ª": { full: "Germany", abbr: "DE" },
    "ğŸ‡¬ğŸ‡§": { full: "United Kingdom", abbr: "GB" },
    "ğŸ‡²ğŸ‡´": { full: "Macao", abbr: "MO" },
    "ğŸ‡«ğŸ‡·": { full: "France", abbr: "FR" },
    "ğŸ‡¦ğŸ‡º": { full: "Australia", abbr: "AU" },
    "ğŸ‡¦ğŸ‡ª": { full: "United Arab Emirates", abbr: "AE" },
    "ğŸ‡¦ğŸ‡«": { full: "Afghanistan", abbr: "AF" },
    "ğŸ‡¦ğŸ‡±": { full: "Albania", abbr: "AL" },
    "ğŸ‡©ğŸ‡¿": { full: "Algeria", abbr: "DZ" },
    "ğŸ‡¦ğŸ‡´": { full: "Angola", abbr: "AO" },
    "ğŸ‡¦ğŸ‡·": { full: "Argentina", abbr: "AR" },
    "ğŸ‡¦ğŸ‡²": { full: "Armenia", abbr: "AM" },
    "ğŸ‡¦ğŸ‡¹": { full: "Austria", abbr: "AT" },
    "ğŸ‡¦ğŸ‡¿": { full: "Azerbaijan", abbr: "AZ" },
    "ğŸ‡§ğŸ‡­": { full: "Bahrain", abbr: "BH" },
    "ğŸ‡§ğŸ‡©": { full: "Bangladesh", abbr: "BD" },
    "ğŸ‡§ğŸ‡¾": { full: "Belarus", abbr: "BY" },
    "ğŸ‡§ğŸ‡ª": { full: "Belgium", abbr: "BE" },
    "ğŸ‡§ğŸ‡¿": { full: "Belize", abbr: "BZ" },
    "ğŸ‡§ğŸ‡¯": { full: "Benin", abbr: "BJ" },
    "ğŸ‡§ğŸ‡¹": { full: "Bhutan", abbr: "BT" },
    "ğŸ‡§ğŸ‡´": { full: "Bolivia", abbr: "BO" },
    "ğŸ‡§ğŸ‡¦": { full: "Bosnia and Herzegovina", abbr: "BA" },
    "ğŸ‡§ğŸ‡¼": { full: "Botswana", abbr: "BW" },
    "ğŸ‡§ğŸ‡·": { full: "Brazil", abbr: "BR" },
    "ğŸ‡»ğŸ‡¬": { full: "British Virgin Islands", abbr: "VG" },
    "ğŸ‡§ğŸ‡³": { full: "Brunei", abbr: "BN" },
    "ğŸ‡§ğŸ‡¬": { full: "Bulgaria", abbr: "BG" },
    "ğŸ‡§ğŸ‡«": { full: "Burkina Faso", abbr: "BF" },
    "ğŸ‡§ğŸ‡®": { full: "Burundi", abbr: "BI" },
    "ğŸ‡°ğŸ‡­": { full: "Cambodia", abbr: "KH" },
    "ğŸ‡¨ğŸ‡²": { full: "Cameroon", abbr: "CM" },
    "ğŸ‡¨ğŸ‡¦": { full: "Canada", abbr: "CA" },
    "ğŸ‡¨ğŸ‡»": { full: "Cape Verde", abbr: "CV" },
    "ğŸ‡°ğŸ‡¾": { full: "Cayman Islands", abbr: "KY" },
    "ğŸ‡¨ğŸ‡«": { full: "Central African Republic", abbr: "CF" },
    "ğŸ‡¹ğŸ‡©": { full: "Chad", abbr: "TD" },
    "ğŸ‡¨ğŸ‡±": { full: "Chile", abbr: "CL" },
    "ğŸ‡¨ğŸ‡´": { full: "Colombia", abbr: "CO" },
    "ğŸ‡°ğŸ‡²": { full: "Comoros", abbr: "KM" },
    "ğŸ‡¨ğŸ‡¬": { full: "Congo - Brazzaville", abbr: "CG" },
    "ğŸ‡¨ğŸ‡©": { full: "Congo - Kinshasa", abbr: "CD" },
    "ğŸ‡¨ğŸ‡·": { full: "Costa Rica", abbr: "CR" },
    "ğŸ‡­ğŸ‡·": { full: "Croatia", abbr: "HR" },
    "ğŸ‡¨ğŸ‡¾": { full: "Cyprus", abbr: "CY" },
    "ğŸ‡¨ğŸ‡¿": { full: "Czechia", abbr: "CZ" },
    "ğŸ‡©ğŸ‡°": { full: "Denmark", abbr: "DK" },
    "ğŸ‡©ğŸ‡¯": { full: "Djibouti", abbr: "DJ" },
    "ğŸ‡©ğŸ‡´": { full: "Dominican Republic", abbr: "DO" },
    "ğŸ‡ªğŸ‡¨": { full: "Ecuador", abbr: "EC" },
    "ğŸ‡ªğŸ‡¬": { full: "Egypt", abbr: "EG" },
    "ğŸ‡¸ğŸ‡»": { full: "El Salvador", abbr: "SV" },
    "ğŸ‡¬ğŸ‡¶": { full: "Equatorial Guinea", abbr: "GQ" },
    "ğŸ‡ªğŸ‡·": { full: "Eritrea", abbr: "ER" },
    "ğŸ‡ªğŸ‡ª": { full: "Estonia", abbr: "EE" },
    "ğŸ‡ªğŸ‡¹": { full: "Ethiopia", abbr: "ET" },
    "ğŸ‡«ğŸ‡¯": { full: "Fiji", abbr: "FJ" },
    "ğŸ‡«ğŸ‡®": { full: "Finland", abbr: "FI" },
    "ğŸ‡¬ğŸ‡¦": { full: "Gabon", abbr: "GA" },
    "ğŸ‡¬ğŸ‡²": { full: "Gambia", abbr: "GM" },
    "ğŸ‡¬ğŸ‡ª": { full: "Georgia", abbr: "GE" },
    "ğŸ‡¬ğŸ‡­": { full: "Ghana", abbr: "GH" },
    "ğŸ‡¬ğŸ‡·": { full: "Greece", abbr: "GR" },
    "ğŸ‡¬ğŸ‡±": { full: "Greenland", abbr: "GL" },
    "ğŸ‡¬ğŸ‡¹": { full: "Guatemala", abbr: "GT" },
    "ğŸ‡¬ğŸ‡³": { full: "Guinea", abbr: "GN" },
    "ğŸ‡¬ğŸ‡¾": { full: "Guyana", abbr: "GY" },
    "ğŸ‡­ğŸ‡¹": { full: "Haiti", abbr: "HT" },
    "ğŸ‡­ğŸ‡³": { full: "Honduras", abbr: "HN" },
    "ğŸ‡­ğŸ‡º": { full: "Hungary", abbr: "HU" },
    "ğŸ‡®ğŸ‡¸": { full: "Iceland", abbr: "IS" },
    "ğŸ‡®ğŸ‡³": { full: "India", abbr: "IN" },
    "ğŸ‡®ğŸ‡©": { full: "Indonesia", abbr: "ID" },
    "ğŸ‡®ğŸ‡·": { full: "Iran", abbr: "IR" },
    "ğŸ‡®ğŸ‡¶": { full: "Iraq", abbr: "IQ" },
    "ğŸ‡®ğŸ‡ª": { full: "Ireland", abbr: "IE" },
    "ğŸ‡®ğŸ‡²": { full: "Isle of Man", abbr: "IM" },
    "ğŸ‡®ğŸ‡±": { full: "Israel", abbr: "IL" },
    "ğŸ‡®ğŸ‡¹": { full: "Italy", abbr: "IT" },
    "ğŸ‡¨ğŸ‡®": { full: "CÃ´te dâ€™Ivoire", abbr: "CI" },
    "ğŸ‡¯ğŸ‡²": { full: "Jamaica", abbr: "JM" },
    "ğŸ‡¯ğŸ‡´": { full: "Jordan", abbr: "JO" },
    "ğŸ‡°ğŸ‡¿": { full: "Kazakhstan", abbr: "KZ" },
    "ğŸ‡°ğŸ‡ª": { full: "Kenya", abbr: "KE" },
    "ğŸ‡°ğŸ‡¼": { full: "Kuwait", abbr: "KW" },
    "ğŸ‡°ğŸ‡¬": { full: "Kyrgyzstan", abbr: "KG" },
    "ğŸ‡±ğŸ‡¦": { full: "Laos", abbr: "LA" },
    "ğŸ‡±ğŸ‡»": { full: "Latvia", abbr: "LV" },
    "ğŸ‡±ğŸ‡§": { full: "Lebanon", abbr: "LB" },
    "ğŸ‡±ğŸ‡¸": { full: "Lesotho", abbr: "LS" },
    "ğŸ‡±ğŸ‡·": { full: "Liberia", abbr: "LR" },
    "ğŸ‡±ğŸ‡¾": { full: "Libya", abbr: "LY" },
    "ğŸ‡±ğŸ‡¹": { full: "Lithuania", abbr: "LT" },
    "ğŸ‡±ğŸ‡º": { full: "Luxembourg", abbr: "LU" },
    "ğŸ‡²ğŸ‡°": { full: "North Macedonia", abbr: "MK" },
    "ğŸ‡²ğŸ‡¬": { full: "Madagascar", abbr: "MG" },
    "ğŸ‡²ğŸ‡¼": { full: "Malawi", abbr: "MW" },
    "ğŸ‡²ğŸ‡¾": { full: "Malaysia", abbr: "MY" },
    "ğŸ‡²ğŸ‡»": { full: "Maldives", abbr: "MV" },
    "ğŸ‡²ğŸ‡±": { full: "Mali", abbr: "ML" },
    "ğŸ‡²ğŸ‡¹": { full: "Malta", abbr: "MT" },
    "ğŸ‡²ğŸ‡·": { full: "Mauritania", abbr: "MR" },
    "ğŸ‡²ğŸ‡º": { full: "Mauritius", abbr: "MU" },
    "ğŸ‡²ğŸ‡½": { full: "Mexico", abbr: "MX" },
    "ğŸ‡²ğŸ‡©": { full: "Moldova", abbr: "MD" },
    "ğŸ‡²ğŸ‡¨": { full: "Monaco", abbr: "MC" },
    "ğŸ‡²ğŸ‡³": { full: "Mongolia", abbr: "MN" },
    "ğŸ‡²ğŸ‡ª": { full: "Montenegro", abbr: "ME" },
    "ğŸ‡²ğŸ‡¦": { full: "Morocco", abbr: "MA" },
    "ğŸ‡²ğŸ‡¿": { full: "Mozambique", abbr: "MZ" },
    "ğŸ‡²ğŸ‡²": { full: "Myanmar", abbr: "MM" },
    "ğŸ‡³ğŸ‡¦": { full: "Namibia", abbr: "NA" },
    "ğŸ‡³ğŸ‡µ": { full: "Nepal", abbr: "NP" },
    "ğŸ‡³ğŸ‡¿": { full: "New Zealand", abbr: "NZ" },
    "ğŸ‡³ğŸ‡®": { full: "Nicaragua", abbr: "NI" },
    "ğŸ‡³ğŸ‡ª": { full: "Niger", abbr: "NE" },
    "ğŸ‡³ğŸ‡¬": { full: "Nigeria", abbr: "NG" },
    "ğŸ‡°ğŸ‡µ": { full: "North Korea", abbr: "KP" },
    "ğŸ‡³ğŸ‡´": { full: "Norway", abbr: "NO" },
    "ğŸ‡´ğŸ‡²": { full: "Oman", abbr: "OM" },
    "ğŸ‡µğŸ‡°": { full: "Pakistan", abbr: "PK" },
    "ğŸ‡µğŸ‡¦": { full: "Panama", abbr: "PA" },
    "ğŸ‡µğŸ‡¾": { full: "Paraguay", abbr: "PY" },
    "ğŸ‡µğŸ‡ª": { full: "Peru", abbr: "PE" },
    "ğŸ‡µğŸ‡­": { full: "Philippines", abbr: "PH" },
    "ğŸ‡µğŸ‡¹": { full: "Portugal", abbr: "PT" },
    "ğŸ‡µğŸ‡·": { full: "Puerto Rico", abbr: "PR" },
    "ğŸ‡¶ğŸ‡¦": { full: "Qatar", abbr: "QA" },
    "ğŸ‡·ğŸ‡´": { full: "Romania", abbr: "RO" },
    "ğŸ‡·ğŸ‡º": { full: "Russia", abbr: "RU" },
    "ğŸ‡·ğŸ‡¼": { full: "Rwanda", abbr: "RW" },
    "ğŸ‡¸ğŸ‡²": { full: "San Marino", abbr: "SM" },
    "ğŸ‡¸ğŸ‡¦": { full: "Saudi Arabia", abbr: "SA" },
    "ğŸ‡¸ğŸ‡³": { full: "Senegal", abbr: "SN" },
    "ğŸ‡·ğŸ‡¸": { full: "Serbia", abbr: "RS" },
    "ğŸ‡¸ğŸ‡±": { full: "Sierra Leone", abbr: "SL" },
    "ğŸ‡¸ğŸ‡°": { full: "Slovakia", abbr: "SK" },
    "ğŸ‡¸ğŸ‡®": { full: "Slovenia", abbr: "SI" },
    "ğŸ‡¸ğŸ‡´": { full: "Somalia", abbr: "SO" },
    "ğŸ‡¿ğŸ‡¦": { full: "South Africa", abbr: "ZA" },
    "ğŸ‡ªğŸ‡¸": { full: "Spain", abbr: "ES" },
    "ğŸ‡±ğŸ‡°": { full: "Sri Lanka", abbr: "LK" },
    "ğŸ‡¸ğŸ‡©": { full: "Sudan", abbr: "SD" },
    "ğŸ‡¸ğŸ‡·": { full: "Suriname", abbr: "SR" },
    "ğŸ‡¸ğŸ‡¿": { full: "Eswatini", abbr: "SZ" },
    "ğŸ‡¸ğŸ‡ª": { full: "Sweden", abbr: "SE" },
    "ğŸ‡¨ğŸ‡­": { full: "Switzerland", abbr: "CH" },
    "ğŸ‡¸ğŸ‡¾": { full: "Syria", abbr: "SY" },
    "ğŸ‡¹ğŸ‡¯": { full: "Tajikistan", abbr: "TJ" },
    "ğŸ‡¹ğŸ‡¿": { full: "Tanzania", abbr: "TZ" },
    "ğŸ‡¹ğŸ‡­": { full: "Thailand", abbr: "TH" },
    "ğŸ‡¹ğŸ‡¬": { full: "Togo", abbr: "TG" },
    "ğŸ‡¹ğŸ‡´": { full: "Tonga", abbr: "TO" },
    "ğŸ‡¹ğŸ‡¹": { full: "Trinidad and Tobago", abbr: "TT" },
    "ğŸ‡¹ğŸ‡³": { full: "Tunisia", abbr: "TN" },
    "ğŸ‡¹ğŸ‡·": { full: "Turkey", abbr: "TR" },
    "ğŸ‡¹ğŸ‡²": { full: "Turkmenistan", abbr: "TM" },
    "ğŸ‡»ğŸ‡®": { full: "U.S. Virgin Islands", abbr: "VI" },
    "ğŸ‡ºğŸ‡¬": { full: "Uganda", abbr: "UG" },
    "ğŸ‡ºğŸ‡¦": { full: "Ukraine", abbr: "UA" },
    "ğŸ‡ºğŸ‡¾": { full: "Uruguay", abbr: "UY" },
    "ğŸ‡ºğŸ‡¿": { full: "Uzbekistan", abbr: "UZ" },
    "ğŸ‡»ğŸ‡ª": { full: "Venezuela", abbr: "VE" },
    "ğŸ‡»ğŸ‡³": { full: "Vietnam", abbr: "VN" },
    "ğŸ‡¾ğŸ‡ª": { full: "Yemen", abbr: "YE" },
    "ğŸ‡¿ğŸ‡²": { full: "Zambia", abbr: "ZM" },
    "ğŸ‡¿ğŸ‡¼": { full: "Zimbabwe", abbr: "ZW" },
    "ğŸ‡¦ğŸ‡©": { full: "Andorra", abbr: "AD" },
    "ğŸ‡·ğŸ‡ª": { full: "RÃ©union", abbr: "RE" },
    "ğŸ‡µğŸ‡±": { full: "Poland", abbr: "PL" },
    "ğŸ‡¬ğŸ‡º": { full: "Guam", abbr: "GU" },
    "ğŸ‡»ğŸ‡¦": { full: "Vatican City", abbr: "VA" },
    "ğŸ‡±ğŸ‡®": { full: "Liechtenstein", abbr: "LI" },
    "ğŸ‡¨ğŸ‡¼": { full: "CuraÃ§ao", abbr: "CW" },
    "ğŸ‡¸ğŸ‡¨": { full: "Seychelles", abbr: "SC" },
    "ğŸ‡¦ğŸ‡¶": { full: "Antarctica", abbr: "AQ" },
    "ğŸ‡¬ğŸ‡®": { full: "Gibraltar", abbr: "GI" },
    "ğŸ‡¨ğŸ‡º": { full: "Cuba", abbr: "CU" },
    "ğŸ‡«ğŸ‡´": { full: "Faroe Islands", abbr: "FO" },
    "ğŸ‡¦ğŸ‡½": { full: "Ã…land Islands", abbr: "AX" },
    "ğŸ‡§ğŸ‡²": { full: "Bermuda", abbr: "BM" },
    "ğŸ‡¹ğŸ‡±": { full: "Timor-Leste", abbr: "TL" },
  },
  abMap = Object.values(geoData).reduce((m, o) => ((m[o.abbr] = o), m), {});

const flag = $server.name.match(/^[\u{1F1E6}-\u{1F1FF}]{2}/u)?.[0] || "",
  words = [
    ...new Intl.Segmenter(undefined, { granularity: "word" }).segment(
      $server.name.replace(flag, "").trim()
    ),
  ]
    .filter((s) => s.isWordLike || /[-.]/.test(s.segment))
    .map((s) => s.segment),
  country =
    flag && geoData[flag]
      ? geoData[flag][out]
      : words[0]
      ? abMap[words[0].slice(0, 2).toUpperCase()]?.[out]
      : "",
  processed = [provider + " " + country].concat(
    words.slice(1).filter((x) => !/Ë£|\b(x\d+|\d+x)/i.test(x.replace(/Ë£/g, "")))
  );

$server.name =
  flag +
  " " +
  processed.reduce((a, c) =>
    /[-.]$/.test(a) || /^[-.]/.test(c) ? a + c : a + " " + c
  );
